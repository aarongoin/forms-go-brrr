var oe=Object.defineProperty,ae=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,W=Object.prototype.propertyIsEnumerable;var D=(t,r,e)=>r in t?oe(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,s=(t,r)=>{for(var e in r||(r={}))K.call(r,e)&&D(t,e,r[e]);if(k)for(var e of k(r))W.call(r,e)&&D(t,e,r[e]);return t},c=(t,r)=>ae(t,ie(r));var u=(t,r)=>{var e={};for(var n in t)K.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&k)for(var n of k(t))r.indexOf(n)<0&&W.call(t,n)&&(e[n]=t[n]);return e};import*as H from"react";import*as M from"react";function w(p){var l=p,{name:t,label:r,children:e,className:n,hint:o,hintClassName:a}=l,i=u(l,["name","label","children","className","hint","hintClassName"]);let d=`${t}-hint`;return M.createElement("fieldset",c(s({},i),{className:"fgb-Fieldset".concat(n?" ":"",n||"")}),M.createElement("legend",null,r),e,M.createElement("span",{id:d,className:"fgb-Fieldset-hint".concat(a?" ":"",a||""),"aria-live":"polite"},o))}import*as G from"react";function V(t){return G.createElement("input",c(s({tabIndex:0},t),{"aria-describedby":`${t.name}-hint`,className:"fgb-Input".concat(t.className?" ":"",t.className||"")}))}import*as P from"react";function U(l){var d=l,{label:t,name:r,children:e,hint:n,textClassName:o,hintClassName:a,className:i}=d,p=u(d,["label","name","children","hint","textClassName","hintClassName","className"]);let R=`${r}-hint`;return P.createElement("label",c(s({htmlFor:r},p),{className:"fgb-Label".concat(i?" ":"",i||"")}),typeof t=="string"?P.createElement("span",{className:"fgb-Label-text".concat(o?" ":"",o||"")},t):t,e,P.createElement("span",{id:R,className:"fgb-Label-hint".concat(a?" ":"",a||""),"aria-live":"polite"},n))}function b({label:t,children:r,className:e}){return P.createElement("label",{className:"fgb-InlineLabel".concat(e?" ":"",e||"")},r,t)}function q(i){var p=i,{type:t,name:r,options:e,label:n,defaultChecked:o}=p,a=u(p,["type","name","options","label","defaultChecked"]);return H.createElement(w,s({label:n,name:r},a),e.map(l=>H.createElement(b,{label:typeof l=="string"?l:l.name},H.createElement(V,{key:typeof l=="string"?l:l.id,type:"checkbox",name:r,value:typeof l=="string"?l:String(l.id),"data-group":r,defaultChecked:o?o.some(typeof l=="string"?d=>d===l:d=>d===l.id):!1}))))}import*as g from"react";import*as C from"react";function j(i){var p=i,{type:t,name:r,options:e,label:n,defaultChecked:o}=p,a=u(p,["type","name","options","label","defaultChecked"]);return C.createElement(w,s({label:n,name:r},a),e.map(l=>C.createElement(b,{label:typeof l=="string"?l:l.name},C.createElement(V,{key:typeof l=="string"?l:l.id,type:"radio",name:r,value:typeof l=="string"?l:String(l.id),"data-group":r,defaultChecked:!!o&&o===(typeof l=="string"?l:l.id)}))))}import*as N from"react";function J(l){var d=l,{options:t,type:r,defaultSelected:e,name:n,renderOption:o,className:a,optionClassName:i}=d,p=u(d,["options","type","defaultSelected","name","renderOption","className","optionClassName"]);let R="fgb-Field-option".concat(i?" ":"",i||"");return N.createElement("select",c(s({name:n,tabIndex:0,"aria-describedby":`${n}-hint`},p),{className:"fgb-Select".concat(a?" ":"",a||"")}),t.map(m=>N.createElement("option",{key:typeof m=="string"?m:m.id,value:typeof m=="string"?m:m.id,className:R,defaultChecked:!!e&&(p.multiple&&Array.isArray(e)?e.some(typeof m=="string"?h=>h===m:h=>h===m.id):e===(typeof m=="string"?m:m.id))},o?o(m):typeof m=="string"?m:m.name)))}import*as _ from"react";function z(a){var i=a,{type:t,minRows:r=3,autosize:e,className:n}=i,o=u(i,["type","minRows","autosize","className"]);return _.createElement("textarea",c(s({},o),{onInput:e?p=>{let l=p.target;setTimeout(()=>{l.style.height="auto",l.style.height=`${l.scrollHeight}px`},0)}:void 0,className:"fgb-Textarea".concat(n?" ":"",n||""),rows:r}))}function X(t){return t.tagName==="FORM"}function E(t){return t.tagName==="INPUT"}function y(t){return t.tagName==="SELECT"}function x(t){return t.tagName==="TEXTAREA"}var F={badInput:"Malformed input.",required:"This field is required.",minLength:"Text is too short.",maxLength:"Text is too long.",pattern:"Value is invalid.",min:"Value is too low.",max:"Value is high.",step:"Value is off-step.",email:"Invalid email address.",url:"Invalid url."};function Oe(t){F=s(s({},F),t)}function Q(t){if(t.validity.badInput)return F.badInput;if(t.validity.valueMissing)return F.required;if(y(t))return"";if(t.validity.tooShort)return F.minLength;if(t.validity.tooLong)return F.maxLength;if(x(t))return"";if(t.validity.patternMismatch)return F.pattern;if(t.validity.rangeUnderflow)return F.min;if(t.validity.rangeOverflow)return F.max;if(t.validity.stepMismatch)return F.step;if(t.validity.typeMismatch){if(t.type==="email")return F.email;if(t.type==="url")return F.url}return""}function I(t,r){var o;let e=t.elements.namedItem(r);if(!e)throw new Error(`Cannot find field with name ${r}`);if("length"in e&&e.length){let a=Array.from(e);if(a[0].type==="radio")return(o=Array.from(a).find(i=>i.checked))==null?void 0:o.value;if(a[0].type==="checkbox")return Array.from(a).map(i=>i.checked?i.value:null).filter(Boolean);throw new Error(`Unexpected collection found in field name ${r}. Found type of ${a[0].type}`)}let n=e;if(y(n))return n.multiple?Array.from(n.selectedOptions).map(a=>a.value):n.value;if(E(n))return n.type==="file"?n.files:n.type==="email"&&n.multiple?n.value.split(/\s*,\s*/):n.type==="checkbox"&&n.dataset.group!==n.name||n.type==="radio"?n.checked:n.value;if(x(n))return n.value;throw new Error(`Unexpected element found in field name ${r}. Found ${n.tagName}`)}function A(t,r,e){let n=t.elements.namedItem(r);if(!n)throw new Error(`Cannot find field with name ${r}`);if("length"in n&&n.length){let a=Array.from(n);if(a[0].type==="radio"){a.forEach(i=>{i.checked=i.value===e});return}if(a[0].type==="checkbox"){a.forEach(Array.isArray(e)?i=>{i.checked=e.includes(i.value)}:i=>{i.checked=i.value===e});return}throw new Error(`Unexpected collection found in field name ${r}. Found type of ${a[0].type}`)}let o=n;if(y(o)){if(o.multiple){Array.from(o.selectedOptions).forEach(Array.isArray(e)?a=>{a.selected=e.includes(a.value)}:a=>{a.selected=a.value===e});return}o.value=`${e}`;return}if(E(o)){if(o.type==="email"&&o.multiple&&Array.isArray(e)){o.value=e.join(",");return}if(o.type==="checkbox"&&o.dataset.group!==o.name){o.checked=!!e;return}if(o.type==="radio"){o.checked=!!e;return}o.value=`${e}`;return}if(x(o)){o.value=`${e}`;return}throw new Error(`Unexpected element found in field name ${r}. Found type of ${o.type}`)}var Y=t=>new FormData(t);function f(t,r,e){t[r]?(Array.isArray(t[r])||(t[r]=[t[r]]),t[r].push(e)):t[r]=e}var Z=t=>{let r={};for(let e of Array.from(t.elements)){if(E(e))switch(e.type){case"number":case"range":f(r,e.name,+e.value);continue;case"radio":!e.checked&&!r[e.name]&&f(r,e.name,null),e.checked&&f(r,e.name,e.value);continue;case"checkbox":e.dataset.group!==e.name?f(r,e.name,!!e.checked):!e.checked&&!r[e.name]?f(r,e.name,[]):e.checked&&f(r,e.name,e.value);continue;case"email":e.multiple?f(r,e.name,e.value.split(/\s*,\s*/)):f(r,e.name,e.value);continue;case"file":f(r,e.name,e.files);default:f(r,e.name,e.value);continue}y(e)&&(e.multiple?f(r,e.name,Array.from(e.selectedOptions).map(n=>n.value)):f(r,e.name,e.value)),x(e)&&f(r,e.name,e.value)}return r};import*as ee from"react";function S(t,r,e){let n=o=>{var p;let a=o.validity.valid?"":Q(o);if(!a){let l=I(o.form,o.name);for(let d of r)if(a=d(l),a)break}o.setCustomValidity(a);let i=(p=o.closest(".fgb-Label, .fgb-Fieldset"))==null?void 0:p.querySelector(`#${o.name}-hint`);return i&&(i.textContent=a),!!a};return{[t]:o=>(n(o.target),e==null?void 0:e(o)),onInvalid:o=>{n(o.target)&&o.preventDefault()}}}function te(t){return(r,e)=>{let n=Array.isArray(e)?e:[e];return function(p){var l=p,{validators:a}=l,i=u(l,["validators"]);return ee.createElement(r,s(s({},i),S(t,a?n.concat(a):n,i[t])))}}}var et=te("onChange"),tt=te("onBlur");function T(t,r,e){var i;let n=t.elements.namedItem(r);if(!n)throw new Error(`Cannot find field with name ${r}`);let o="length"in n&&n.length?n.item(0):n;o.setCustomValidity(e);let a=(i=o.closest(".fgb-Label, .fgb-Fieldset"))==null?void 0:i.querySelector(`#${o.name}-hint`);a&&(a.textContent=e)}function re(t,r){let e=!0;for(let o of Array.from(t.elements))o.dispatchEvent(new Event("invalid",{cancelable:!0}))||(e=!1);if(!r)return e;let n=r(o=>I(t,o),(o,a)=>A(t,o,a));if(n)for(let o of Object.keys(n))n[o]&&(e=!1),T(t,o,n[o]);return e}function B(t,r){return e=>{let n=X(e.target)?e.target:"form"in e.target?e.target.form:null;if(!n)throw new Error("Expected to find a form element attached to wrapped event target.");let o=t(a=>I(n,a),(a,i)=>A(n,a,i));if(o)for(let a of Object.keys(o))T(n,a,o[a]);return r==null?void 0:r(e)}}var le=["radio","checkbox"];function Kt(t){let r=t.validate?S(t.validate,t.validators||(t.validator?[t.validator]:[]),t[t.validate]):null;if(t.type==="checkboxes")return g.createElement(q,s(s({},t),r));if(t.type==="radiogroup")return g.createElement(j,s(s({},t),r));let l=t,{label:e,hint:n,className:o,inputClassName:a}=l,i=u(l,["label","hint","className","inputClassName"]),p=le.includes(t.type)?b:U;return g.createElement(p,{label:e,name:i.name,hint:n,className:o},t.type==="select"?g.createElement(J,s(c(s({},t),{className:a}),r)):t.type==="textarea"?g.createElement(z,s(c(s({},t),{className:a}),r)):g.createElement(V,s(c(s({},t),{className:a}),r)))}import*as ne from"react";function _t(R){var m=R,{dialog:t,method:r="post",action:e,submitFormData:n,submitJson:o,validate:a,validator:i,className:p,autoComplete:l=!1}=m,d=u(m,["dialog","method","action","submitFormData","submitJson","validate","validator","className","autoComplete"]);if(!n&&!o)throw new Error("Must supply a submit method prop of either `submitFormData` or `submitJson`.");return ne.createElement("form",c(s({},d),{className:"fgb-Form".concat(p?" ":"",p||""),noValidate:typeof window!==void 0,autoComplete:l?"on":"off",method:t?"dialog":r,action:e,onChange:i&&(a==null?void 0:a.startsWith("onChange"))?B(i,d.onChange):void 0,onBlur:i&&(a==null?void 0:a.startsWith("onBlur"))?B(i,d.onBlur):void 0,onSubmit:h=>{let L=h.target;if(h.preventDefault(),re(L,(a==null?void 0:a.endsWith("Submit"))&&i||void 0)){let v=n?n(Y(L)):o(Z(L));(v&&v instanceof Promise?v:Promise.resolve(v)).then(O=>{if(!!O)for(let $ of Object.keys(O))T(L,$,O[$])})}}}))}export{q as Checkboxes,Kt as Field,w as Fieldset,_t as Form,b as InlineLabel,V as Input,U as Label,j as RadioGroup,J as Select,z as Textarea,Q as getErrorMessage,I as getFormFieldValue,Y as getFormValuesAsFormData,Z as getFormValuesAsJson,X as isFormElement,E as isInputElement,y as isSelectElement,x as isTextareaElement,Oe as setDefaultErrorMessages,A as setFormFieldValue,re as validateForm,B as validationEffectHandler,te as withValidation,tt as withValidationOnBlur,et as withValidationOnChange,S as wrapWithFieldValidation};
