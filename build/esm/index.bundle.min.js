var ie=Object.defineProperty,le=Object.defineProperties;var se=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var K=(t,r,e)=>r in t?ie(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,s=(t,r)=>{for(var e in r||(r={}))G.call(r,e)&&K(t,e,r[e]);if(M)for(var e of M(r))U.call(r,e)&&K(t,e,r[e]);return t},d=(t,r)=>le(t,se(r));var p=(t,r)=>{var e={};for(var n in t)G.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&M)for(var n of M(t))r.indexOf(n)<0&&U.call(t,n)&&(e[n]=t[n]);return e};import*as w from"react";import*as k from"react";function H(m){var l=m,{name:t,label:r,children:e,className:n,hint:o,hintClassName:a}=l,i=p(l,["name","label","children","className","hint","hintClassName"]);let c=`${t}-hint`;return k.createElement("fieldset",d(s({},i),{className:"fgb-Fieldset".concat(n?" ":"",n||"")}),k.createElement("legend",null,r),e,k.createElement("span",{id:c,className:"fgb-Fieldset-hint".concat(a?" ":"",a||""),"aria-live":"polite","data-hint":o},o))}import*as W from"react";function E(t){return W.createElement("input",d(s({tabIndex:0},t),{"aria-describedby":`${t.name}-hint`,className:"fgb-Input".concat(t.className?" ":"",t.className||"")}))}import*as I from"react";function q(l){var c=l,{label:t,name:r,children:e,hint:n,textClassName:o,hintClassName:a,className:i}=c,m=p(c,["label","name","children","hint","textClassName","hintClassName","className"]);let v=`${r}-hint`;return I.createElement("label",d(s({htmlFor:r},m),{className:"fgb-Label".concat(i?" ":"",i||"")}),typeof t=="string"?I.createElement("span",{className:"fgb-Label-text".concat(o?" ":"",o||"")},t):t,e,I.createElement("span",{id:v,className:"fgb-Label-hint".concat(a?" ":"",a||""),"aria-live":"polite","data-hint":n},n))}function V({label:t,children:r,className:e}){return I.createElement("label",{className:"fgb-InlineLabel".concat(e?" ":"",e||"")},r,t)}function _(i){var m=i,{type:t,name:r,options:e,label:n,defaultChecked:o}=m,a=p(m,["type","name","options","label","defaultChecked"]);return w.createElement(H,s({label:n,name:r},a),e.map(l=>w.createElement(V,{label:typeof l=="string"?l:l.label},w.createElement(E,{key:typeof l=="string"?l:l.value,type:"checkbox",name:r,value:typeof l=="string"?l:String(l.value),"data-group":r,defaultChecked:o?o.some(typeof l=="string"?c=>c===l:c=>c===l.value):!1}))))}import*as b from"react";import*as C from"react";function j(i){var m=i,{type:t,name:r,options:e,label:n,defaultChecked:o}=m,a=p(m,["type","name","options","label","defaultChecked"]);return C.createElement(H,s({label:n,name:r},a),e.map(l=>C.createElement(V,{label:typeof l=="string"?l:l.label},C.createElement(E,{key:typeof l=="string"?l:l.value,type:"radio",name:r,value:typeof l=="string"?l:String(l.value),"data-group":r,defaultChecked:!!o&&o===(typeof l=="string"?l:l.value)}))))}import*as N from"react";function J(l){var c=l,{options:t,type:r,defaultSelected:e,name:n,renderOption:o,className:a,optionClassName:i}=c,m=p(c,["options","type","defaultSelected","name","renderOption","className","optionClassName"]);let v="fgb-Field-option".concat(i?" ":"",i||"");return N.createElement("select",d(s({name:n,tabIndex:0,"aria-describedby":`${n}-hint`},m),{className:"fgb-Select".concat(a?" ":"",a||"")}),t.map(u=>N.createElement("option",{key:typeof u=="string"?u:u.id,value:typeof u=="string"?u:u.id,className:v,defaultChecked:!!e&&(m.multiple&&Array.isArray(e)?e.some(typeof u=="string"?h=>h===u:h=>h===u.id):e===(typeof u=="string"?u:u.id))},o?o(u):typeof u=="string"?u:u.name)))}import*as z from"react";function X(a){var i=a,{type:t,minRows:r=3,autosize:e,className:n}=i,o=p(i,["type","minRows","autosize","className"]);return z.createElement("textarea",d(s({},o),{onInput:e?m=>{let l=m.target;setTimeout(()=>{l.style.height="auto",l.style.height=`${l.scrollHeight}px`},0)}:void 0,className:"fgb-Textarea".concat(n?" ":"",n||""),rows:r}))}function Q(t){return t.tagName==="FORM"}function T(t){return t.tagName==="INPUT"}function F(t){return t.tagName==="SELECT"}function x(t){return t.tagName==="TEXTAREA"}var y={badInput:"Malformed input.",required:"Required.",minLength:"Too short.",maxLength:"Too long.",pattern:"Invalid value.",min:"Too low.",max:"Too high.",step:"Off-step.",email:"Invalid email address.",url:"Invalid url."};function Be(t){y=s(s({},y),t)}function Y(t){if(t.validity.badInput)return y.badInput;if(t.validity.valueMissing)return y.required;if(F(t))return"";if(t.validity.tooShort)return y.minLength;if(t.validity.tooLong)return y.maxLength;if(x(t))return"";if(t.validity.patternMismatch)return y.pattern;if(t.validity.rangeUnderflow)return y.min;if(t.validity.rangeOverflow)return y.max;if(t.validity.stepMismatch)return y.step;if(t.validity.typeMismatch){if(t.type==="email")return y.email;if(t.type==="url")return y.url}return""}function P(t,r){var o;let e=t.elements.namedItem(r);if(!e)throw new Error(`Cannot find field with name ${r}`);if("length"in e&&e.length){let a=Array.from(e);if(a[0].type==="radio")return(o=Array.from(a).find(i=>i.checked))==null?void 0:o.value;if(a[0].type==="checkbox")return Array.from(a).map(i=>i.checked?i.value:null).filter(Boolean);throw new Error(`Unexpected collection found in field name ${r}. Found type of ${a[0].type}`)}let n=e;if(F(n))return n.multiple?Array.from(n.selectedOptions).map(a=>a.value):n.value;if(T(n))return n.type==="file"?n.files:n.type==="email"&&n.multiple?n.value.split(/\s*,\s*/):n.type==="checkbox"&&n.dataset.group!==n.name||n.type==="radio"?n.checked:n.value;if(x(n))return n.value;throw new Error(`Unexpected element found in field name ${r}. Found ${n.tagName}`)}function A(t,r,e){let n=t.elements.namedItem(r);if(!n)throw new Error(`Cannot find field with name ${r}`);if("length"in n&&n.length){let a=Array.from(n);if(a[0].type==="radio"){a.forEach(i=>{i.checked=i.value===e});return}if(a[0].type==="checkbox"){a.forEach(Array.isArray(e)?i=>{i.checked=e.includes(i.value)}:i=>{i.checked=i.value===e});return}throw new Error(`Unexpected collection found in field name ${r}. Found type of ${a[0].type}`)}let o=n;if(F(o)){if(o.multiple){Array.from(o.selectedOptions).forEach(Array.isArray(e)?a=>{a.selected=e.includes(a.value)}:a=>{a.selected=a.value===e});return}o.value=`${e}`;return}if(T(o)){if(o.type==="email"&&o.multiple&&Array.isArray(e)){o.value=e.join(",");return}if(o.type==="checkbox"&&o.dataset.group!==o.name){o.checked=!!e;return}if(o.type==="radio"){o.checked=!!e;return}o.value=`${e}`;return}if(x(o)){o.value=`${e}`;return}throw new Error(`Unexpected element found in field name ${r}. Found type of ${o.type}`)}var Z=t=>new FormData(t);function f(t,r,e){t[r]?(Array.isArray(t[r])||(t[r]=[t[r]]),t[r].push(e)):t[r]=e}var ee=t=>{let r={};for(let e of Array.from(t.elements)){if(T(e))switch(e.type){case"number":case"range":f(r,e.name,+e.value);continue;case"radio":!e.checked&&!r[e.name]&&f(r,e.name,null),e.checked&&f(r,e.name,e.value);continue;case"checkbox":e.dataset.group!==e.name?f(r,e.name,!!e.checked):!e.checked&&!r[e.name]?f(r,e.name,[]):e.checked&&f(r,e.name,e.value);continue;case"email":e.multiple?f(r,e.name,e.value.split(/\s*,\s*/)):f(r,e.name,e.value);continue;case"file":f(r,e.name,e.files);default:f(r,e.name,e.value);continue}F(e)&&(e.multiple?f(r,e.name,Array.from(e.selectedOptions).map(n=>n.value)):f(r,e.name,e.value)),x(e)&&f(r,e.name,e.value)}return r};import*as te from"react";function g(t,r,e){var i;let n=t.elements.namedItem(r);if(!n)throw new Error(`Cannot find field with name ${r}`);let o="length"in n&&n.length?n.item(0):n;o.setCustomValidity(e);let a=(i=o.closest(".fgb-Label, .fgb-Fieldset"))==null?void 0:i.querySelector(`#${o.name}-hint`);a&&(a.textContent=e||a.dataset.hint||"")}function O(t,r,e){let n=o=>{let a=o.validity.valid?"":Y(o),i=P(o.form,o.name);return a=r(i)||a,g(o.form,o.name,a),!!a};return{[t]:o=>(n(o.target),e==null?void 0:e(o)),onInvalid:o=>{n(o.target)&&o.preventDefault()}}}function re(t){return(r,e)=>{let n=Array.isArray(e)?e:[e];return function(m){var l=m,{validators:a}=l,i=p(l,["validators"]);return te.createElement(r,s(s({},i),O(t,a?n.concat(a):n,i[t])))}}}var ot=re("onChange"),at=re("onBlur");function ne(t,r){let e=!0,n=r==null?void 0:r(o=>P(t,o),(o,a)=>A(t,o,a));for(let o of Array.from(t.elements)){if(!o.name)continue;let a=(n==null?void 0:n[o.name])||"",i=o.dispatchEvent(new Event("invalid",{cancelable:!0}))&&!a;(i||a)&&g(t,o.name,a),i||(e=!1)}return e}function B(t,r){return e=>{let n=Q(e.target)?e.target:"form"in e.target?e.target.form:null;if(!n)throw new Error("Expected to find a form element attached to wrapped event target.");let o=t(a=>P(n,a),(a,i)=>A(n,a,i));if(o)for(let a of Object.keys(o))g(n,a,o[a]);return r==null?void 0:r(e)}}var pe=["radio","checkbox"];function Wt(t){let r=t.validateOnChange||t.validateOnBlur?O(t.validateOnChange?"onChange":"onBlur",t.validateOnChange||t.validateOnBlur,t[t.validateOnChange?"onChange":"onBlur"]):null;if(t.type==="checkboxes")return b.createElement(_,s(s({},t),r));if(t.type==="radiogroup")return b.createElement(j,s(s({},t),r));let l=t,{label:e,hint:n,className:o,inputClassName:a}=l,i=p(l,["label","hint","className","inputClassName"]),m=pe.includes(i.type)?V:q;return b.createElement(m,{label:e,name:i.name,hint:n,className:o},i.type==="select"?b.createElement(J,s(d(s({},i),{className:a}),r)):i.type==="textarea"?b.createElement(X,s(d(s({},i),{className:a}),r)):b.createElement(E,s(d(s({},i),{className:a}),r)))}import*as oe from"react";function Qt(v){var u=v,{dialog:t,method:r="post",action:e,submitFormData:n,submitJson:o,validateOnBlur:a,validateOnChange:i,className:m,autoComplete:l=!1}=u,c=p(u,["dialog","method","action","submitFormData","submitJson","validateOnBlur","validateOnChange","className","autoComplete"]);if(!n&&!o)throw new Error("Must supply a submit method prop of either `submitFormData` or `submitJson`.");return oe.createElement("form",d(s({},c),{className:"fgb-Form".concat(m?" ":"",m||""),noValidate:typeof window!==void 0,autoComplete:l?"on":"off",method:t?"dialog":r,action:e,onChange:i?B(i,c.onChange):void 0,onBlur:a?B(a,c.onBlur):void 0,onSubmit:h=>{let R=h.target;if(h.preventDefault(),ne(R,i||a||void 0)){let L=n?n(Z(R)):o(ee(R));(L&&L instanceof Promise?L:Promise.resolve(L)).then(S=>{if(!!S)for(let D of Object.keys(S))g(R,D,S[D])})}}}))}import*as ae from"react";function $(t){var r;for(let e of Array.from(t.elements)){if(!e.name)continue;if(((r=e.closest(".fgb-Label, .fgb-Fieldset"))==null?void 0:r.querySelector(`#${e.name}-hint`)).textContent)return!1}return!0}function rr(e){var n=e,{validate:t}=n,r=p(n,["validate"]);return ae.createElement("button",d(s({},r),{type:"submit",ref:o=>{o&&o.form&&(o.disabled=!$(o.form),o.form.addEventListener(t==="onChange"?"input":"change",a=>{o.disabled=!$(o.form)}))}}))}export{_ as Checkboxes,Wt as Field,H as Fieldset,Qt as Form,V as InlineLabel,E as Input,q as Label,j as RadioGroup,J as Select,rr as Submit,X as Textarea,Y as getErrorMessage,P as getFormFieldValue,Z as getFormValuesAsFormData,ee as getFormValuesAsJson,Q as isFormElement,T as isInputElement,F as isSelectElement,x as isTextareaElement,Be as setDefaultErrorMessages,A as setFormFieldValue,ne as validateForm,B as validationEffectHandler,re as withValidation,at as withValidationOnBlur,ot as withValidationOnChange,O as wrapWithFieldValidation};
