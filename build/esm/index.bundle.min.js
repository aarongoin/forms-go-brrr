var re=Object.defineProperty,ne=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var $=(t,r,e)=>r in t?re(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,l=(t,r)=>{for(var e in r||(r={}))D.call(r,e)&&$(t,e,r[e]);if(M)for(var e of M(r))K.call(r,e)&&$(t,e,r[e]);return t},f=(t,r)=>ne(t,oe(r));var d=(t,r)=>{var e={};for(var n in t)D.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&M)for(var n of M(t))r.indexOf(n)<0&&K.call(t,n)&&(e[n]=t[n]);return e};import*as S from"react";import*as A from"react";function N({name:t,label:r,disabled:e,children:n,className:o,hint:a,hintClassName:i}){let p=`${t}-hint`;return A.createElement("fieldset",{disabled:e,className:"brrr-Fieldset".concat(o?" ":"",o||"")},A.createElement("legend",null,r),n,A.createElement("span",{id:p,className:"brrr-Fieldset-hint".concat(i?" ":"",i||""),"aria-live":"polite"},a))}import*as G from"react";function P(t){return G.createElement("input",f(l({tabIndex:0,"aria-describedby":`${t.name}-hint`},t),{className:"brrr-Input".concat(t.className?" ":"",t.className||"")}))}import*as L from"react";function W({label:t,name:r,children:e,hint:n,className:o,textClassName:a,hintClassName:i}){let p=`${r}-hint`;return L.createElement("label",{htmlFor:r,className:"brrr-Label".concat(o?" ":"",o||"")},typeof t=="string"?L.createElement("span",{className:"brrr-Label-text".concat(a?" ":"",a||"")},t):t,e,L.createElement("span",{id:p,className:"brrr-Label-hint".concat(i?" ":"",i||""),"aria-live":"polite"},n))}function v({label:t,children:r,className:e}){return L.createElement("label",{className:"brrr-Label".concat(e?" ":"",e||"")},r,t)}function U(i){var p=i,{type:t,name:r,options:e,label:n,defaultChecked:o}=p,a=d(p,["type","name","options","label","defaultChecked"]);return S.createElement(N,l({label:n,name:r},a),e.map(s=>S.createElement(v,{label:typeof s=="string"?s:s.name},S.createElement(P,{key:typeof s=="string"?s:s.id,type:"checkbox",name:r,value:typeof s=="string"?s:String(s.id),"data-group":r,defaultChecked:o?o.some(typeof s=="string"?h=>h===s:h=>h===s.id):!1}))))}import*as I from"react";import*as H from"react";function j(i){var p=i,{type:t,name:r,options:e,label:n,defaultChecked:o}=p,a=d(p,["type","name","options","label","defaultChecked"]);return H.createElement(N,l({label:n,name:r},a),e.map(s=>H.createElement(v,{label:typeof s=="string"?s:s.name},H.createElement(P,{key:typeof s=="string"?s:s.id,type:"radio",name:r,value:typeof s=="string"?s:String(s.id),"data-group":r,defaultChecked:!!o&&o===(typeof s=="string"?s:s.id)}))))}import*as O from"react";function q(s){var h=s,{options:t,type:r,defaultSelected:e,name:n,renderOption:o,className:a,optionClassName:i}=h,p=d(h,["options","type","defaultSelected","name","renderOption","className","optionClassName"]);let C="brrr-Select-option".concat(i?" ":"",i||"");return O.createElement("select",f(l({name:n,tabIndex:0,"aria-describedby":`${n}-hint`},p),{className:"brrr-Select".concat(a?" ":"",a||"")}),t.map(m=>O.createElement("option",{key:typeof m=="string"?m:m.id,value:typeof m=="string"?m:m.id,className:C,defaultChecked:!!e&&(p.multiple&&Array.isArray(e)?e.some(typeof m=="string"?F=>F===m:F=>F===m.id):e===(typeof m=="string"?m:m.id))},o?o(m):typeof m=="string"?m:m.name)))}import*as J from"react";function z(a){var i=a,{type:t,minRows:r=3,autosize:e,className:n}=i,o=d(i,["type","minRows","autosize","className"]);return J.createElement("textarea",f(l({},o),{onInput:e?p=>{let s=p.target;setTimeout(()=>{s.style.height="auto",s.style.height=`${s.scrollHeight}px`},0)}:void 0,className:"brrr-Textarea".concat(n?" ":"",n||""),rows:r}))}function R(t){return t.tagName==="INPUT"}function V(t){return t.tagName==="SELECT"}function b(t){return t.tagName==="TEXTAREA"}var g={badInput:"Value is invalid.",required:"This field is required.",minLength:"Text is too short.",maxLength:"Text is too long.",pattern:"Value is invalid.",min:"Value is too low.",max:"Value is high.",step:"Value is invalid.",email:"Value is invalid.",url:"Value is invalid."};function we(t){g=l(l({},g),t)}function X(t){if(t.validity.badInput)return g.badInput;if(t.validity.valueMissing)return g.required;if(V(t))return"";if(t.validity.tooShort)return g.minLength;if(t.validity.tooLong)return g.maxLength;if(b(t))return"";if(t.validity.patternMismatch)return g.pattern;if(t.validity.rangeUnderflow)return g.min;if(t.validity.rangeOverflow)return g.max;if(t.validity.stepMismatch)return g.step;if(t.validity.typeMismatch){if(t.type==="email")return g.email;if(t.type==="url")return g.url}return""}function E(t,r){var o;let e=t.elements.namedItem(r);if(!e)throw new Error(`Cannot find field with name ${r}`);if("length"in e&&e.length){let a=Array.from(e);if(a[0].type==="radio")return(o=Array.from(a).find(i=>i.checked))==null?void 0:o.value;if(a[0].type==="checkbox")return Array.from(a).map(i=>i.checked?i.value:null).filter(Boolean);throw new Error(`Unexpected collection found in field name ${r}. Found type of ${a[0].type}`)}let n=e;if(V(n))return n.multiple?Array.from(n.selectedOptions).map(a=>a.value):n.value;if(R(n))return n.type==="file"?n.files:n.type==="email"&&n.multiple?n.value.split(/\s*,\s*/):n.type==="checkbox"&&n.dataset.group!==n.name||n.type==="radio"?n.checked:n.value;if(b(n))return n.value;throw new Error(`Unexpected element found in field name ${r}. Found ${n.tagName}`)}function w(t,r,e){let n=t.elements.namedItem(r);if(!n)throw new Error(`Cannot find field with name ${r}`);if("length"in n&&n.length){let a=Array.from(n);if(a[0].type==="radio"){a.forEach(i=>{i.checked=i.value===e});return}if(a[0].type==="checkbox"){a.forEach(Array.isArray(e)?i=>{i.checked=e.includes(i.value)}:i=>{i.checked=i.value===e});return}throw new Error(`Unexpected collection found in field name ${r}. Found type of ${a[0].type}`)}let o=n;if(V(o)){if(o.multiple){Array.from(o.selectedOptions).forEach(Array.isArray(e)?a=>{a.selected=e.includes(a.value)}:a=>{a.selected=a.value===e});return}o.value=`${e}`;return}if(R(o)){if(o.type==="email"&&o.multiple&&Array.isArray(e)){o.value=e.join(",");return}if(o.type==="checkbox"&&o.dataset.group!==o.name){o.checked=!!e;return}if(o.type==="radio"){o.checked=!!e;return}o.value=`${e}`;return}if(b(o)){o.value=`${e}`;return}throw new Error(`Unexpected element found in field name ${r}. Found type of ${o.type}`)}var Q=t=>new FormData(t);function y(t,r,e){t[r]?(Array.isArray(t[r])||(t[r]=[t[r]]),t[r].push(e)):t[r]=e}var Y=t=>{let r={};for(let e of Array.from(t.elements)){if(R(e))switch(e.type){case"number":case"range":y(r,e.name,+e.value);continue;case"radio":!e.checked&&!r[e.name]&&y(r,e.name,null),e.checked&&y(r,e.name,e.value);continue;case"checkbox":e.dataset.group!==e.name?y(r,e.name,!!e.checked):!e.checked&&!r[e.name]?y(r,e.name,[]):e.checked&&y(r,e.name,e.value);continue;case"email":e.multiple?y(r,e.name,e.value.split(/\s*,\s*/)):y(r,e.name,e.value);continue;case"file":y(r,e.name,e.files);default:y(r,e.name,e.value);continue}V(e)&&(e.multiple?y(r,e.name,Array.from(e.selectedOptions).map(n=>n.value)):y(r,e.name,e.value)),b(e)&&y(r,e.name,e.value)}return r};import*as Z from"react";function _(t){return(r,e)=>{let n=Array.isArray(e)?e:[e];return function(p){var s=p,{validators:a}=s,i=d(s,["validators"]);return Z.createElement(r,l(l({},i),B(t,a?n.concat(a):n,i[t])))}}}function B(t,r,e){let n=o=>{var p;let a=o.validity.valid?"":X(o);if(!a){let s=E(o.form,o.name);for(let h of r)if(a=h(s),a)break}o.setCustomValidity(a);let i=(p=o.closest(".brrr-Label, .brrr-Fieldset"))==null?void 0:p.querySelector(`#${o.name}-hint`);return i&&(i.textContent=a),!!a};return{[t]:o=>(n(o.target),e==null?void 0:e(o)),onInvalid:o=>{n(o.target)&&o.preventDefault()}}}var qe=_("onChange"),Je=_("onBlur");var ae=["radio","checkbox"];function Ft(t){let r=t.validate?B(t.validate,t.validators||[],t[t.validate]):null;if(t.type==="checkboxes")return I.createElement(U,l(l({},t),r));if(t.type==="radiogroup")return I.createElement(j,l(l({},t),r));let s=t,{label:e,hint:n,className:o,inputClassName:a}=s,i=d(s,["label","hint","className","inputClassName"]),p=ae.includes(t.type)?v:W;return I.createElement(p,{label:e,name:i.name,hint:n,className:o},t.type==="select"?I.createElement(q,l(f(l({},t),{className:a}),r)):t.type==="textarea"?I.createElement(z,l(f(l({},t),{className:a}),r)):I.createElement(P,l(f(l({},t),{className:a}),r)))}import*as te from"react";function k(t,r,e){var i;let n=t.elements.namedItem(r);if(!n)throw new Error(`Cannot find field with name ${r}`);let o="length"in n&&n.length?n.item(0):n;o.setCustomValidity(e);let a=(i=o.closest(".brrr-Label, .brrr-Fieldset"))==null?void 0:i.querySelector(`#${o.name}-hint`);a&&(a.textContent=e)}function ee(t,r){let e=!0;for(let o of Array.from(t.elements))o.dispatchEvent(new Event("invalid",{cancelable:!0}))||(e=!1);if(!r)return e;let n=r(o=>E(t,o),(o,a)=>w(t,o,a));if(n){e=!1;for(let o of Object.keys(n))k(t,o,n[o])}return e}function Ct(h){var C=h,{dialog:t,method:r="post",action:e,submitFormData:n,submitJson:o,validate:a,validator:i,className:p}=C,s=d(C,["dialog","method","action","submitFormData","submitJson","validate","validator","className"]);if(!n&&!o)throw new Error("Must supply a submit method prop of either `submitFormData` or `submitJson`.");let m={};return a!=null&&a.startsWith("onChange")&&(m.onChange=F=>{let x=F.target.form,c=i(u=>E(x,u),(u,T)=>w(x,u,T));if(console.log("Form onchange!",{formErrors:c}),c)for(let u of Object.keys(c))k(x,u,c[u])}),a!=null&&a.startsWith("onBlur")&&(m.onBlur=F=>{let x=F.target.form,c=i(u=>E(x,u),(u,T)=>w(x,u,T));if(c)for(let u of Object.keys(c))k(x,u,c[u])}),te.createElement("form",f(l(f(l({},s),{className:"brrr-Form".concat(p?" ":"",p||""),noValidate:typeof window!==void 0,method:t?"dialog":r,action:e}),m),{onSubmit:F=>{let x=F.target;if(F.preventDefault(),ee(x,(a==null?void 0:a.endsWith("Submit"))&&i||void 0)){let c=n?n(Q(x)):o(Y(x));(c&&c instanceof Promise?c:Promise.resolve(c)).then(u=>{if(!!u)for(let T of Object.keys(u))k(x,T,u[T])})}}}))}export{U as Checkboxes,Ft as Field,N as Fieldset,Ct as Form,v as InlineLabel,P as Input,W as Label,j as RadioGroup,q as Select,z as Textarea,X as getErrorMessage,E as getFieldValue,Q as getFormValuesAsFormData,Y as getFormValuesAsJson,R as isInputElement,V as isSelectElement,b as isTextareaElement,we as setErrorMessages,w as setFieldValue,_ as withValidation,Je as withValidationOnBlur,qe as withValidationOnChange,B as wrapWithValiation};
