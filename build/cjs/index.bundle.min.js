"use strict";var ae=Object.create;var C=Object.defineProperty,ie=Object.defineProperties,se=Object.getOwnPropertyDescriptor,le=Object.getOwnPropertyDescriptors,pe=Object.getOwnPropertyNames,S=Object.getOwnPropertySymbols,me=Object.getPrototypeOf,D=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var Y=(t,r,e)=>r in t?C(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,l=(t,r)=>{for(var e in r||(r={}))D.call(r,e)&&Y(t,e,r[e]);if(S)for(var e of S(r))Z.call(r,e)&&Y(t,e,r[e]);return t},f=(t,r)=>ie(t,le(r));var d=(t,r)=>{var e={};for(var n in t)D.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&S)for(var n of S(t))r.indexOf(n)<0&&Z.call(t,n)&&(e[n]=t[n]);return e};var ue=(t,r)=>{for(var e in r)C(t,e,{get:r[e],enumerable:!0})},_=(t,r,e,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of pe(r))!D.call(t,o)&&o!==e&&C(t,o,{get:()=>r[o],enumerable:!(n=se(r,o))||n.enumerable});return t};var h=(t,r,e)=>(e=t!=null?ae(me(t)):{},_(r||!t||!t.__esModule?C(e,"default",{value:t,enumerable:!0}):e,t)),de=t=>_(C({},"__esModule",{value:!0}),t);var he={};ue(he,{Checkboxes:()=>G,Field:()=>ge,Fieldset:()=>M,Form:()=>Fe,InlineLabel:()=>P,Input:()=>T,Label:()=>K,RadioGroup:()=>W,Select:()=>j,Textarea:()=>q,getErrorMessage:()=>J,getFieldValue:()=>I,getFormValuesAsFormData:()=>z,getFormValuesAsJson:()=>X,isInputElement:()=>v,isSelectElement:()=>b,isTextareaElement:()=>E,setErrorMessages:()=>ce,setFieldValue:()=>L,withValidation:()=>Q,withValidationOnBlur:()=>ye,withValidationOnChange:()=>fe,wrapWithValiation:()=>$});module.exports=de(he);var O=h(require("react"));var H=h(require("react"));function M({name:t,label:r,disabled:e,children:n,className:o,hint:a,hintClassName:i}){let p=`${t}-hint`;return H.createElement("fieldset",{disabled:e,className:"brrr-Fieldset".concat(o?" ":"",o||"")},H.createElement("legend",null,r),n,H.createElement("span",{id:p,className:"brrr-Fieldset-hint".concat(i?" ":"",i||""),"aria-live":"polite"},a))}var ee=h(require("react"));function T(t){return ee.createElement("input",f(l({tabIndex:0,"aria-describedby":`${t.name}-hint`},t),{className:"brrr-Input".concat(t.className?" ":"",t.className||"")}))}var A=h(require("react"));function K({label:t,name:r,children:e,hint:n,className:o,textClassName:a,hintClassName:i}){let p=`${r}-hint`;return A.createElement("label",{htmlFor:r,className:"brrr-Label".concat(o?" ":"",o||"")},typeof t=="string"?A.createElement("span",{className:"brrr-Label-text".concat(a?" ":"",a||"")},t):t,e,A.createElement("span",{id:p,className:"brrr-Label-hint".concat(i?" ":"",i||""),"aria-live":"polite"},n))}function P({label:t,children:r,className:e}){return A.createElement("label",{className:"brrr-Label".concat(e?" ":"",e||"")},r,t)}function G(i){var p=i,{type:t,name:r,options:e,label:n,defaultChecked:o}=p,a=d(p,["type","name","options","label","defaultChecked"]);return O.createElement(M,l({label:n,name:r},a),e.map(s=>O.createElement(P,{label:typeof s=="string"?s:s.name},O.createElement(T,{key:typeof s=="string"?s:s.id,type:"checkbox",name:r,value:typeof s=="string"?s:String(s.id),"data-group":r,defaultChecked:o?o.some(typeof s=="string"?V=>V===s:V=>V===s.id):!1}))))}var R=h(require("react"));var B=h(require("react"));function W(i){var p=i,{type:t,name:r,options:e,label:n,defaultChecked:o}=p,a=d(p,["type","name","options","label","defaultChecked"]);return B.createElement(M,l({label:n,name:r},a),e.map(s=>B.createElement(P,{label:typeof s=="string"?s:s.name},B.createElement(T,{key:typeof s=="string"?s:s.id,type:"radio",name:r,value:typeof s=="string"?s:String(s.id),"data-group":r,defaultChecked:!!o&&o===(typeof s=="string"?s:s.id)}))))}var U=h(require("react"));function j(s){var V=s,{options:t,type:r,defaultSelected:e,name:n,renderOption:o,className:a,optionClassName:i}=V,p=d(V,["options","type","defaultSelected","name","renderOption","className","optionClassName"]);let N="brrr-Select-option".concat(i?" ":"",i||"");return U.createElement("select",f(l({name:n,tabIndex:0,"aria-describedby":`${n}-hint`},p),{className:"brrr-Select".concat(a?" ":"",a||"")}),t.map(m=>U.createElement("option",{key:typeof m=="string"?m:m.id,value:typeof m=="string"?m:m.id,className:N,defaultChecked:!!e&&(p.multiple&&Array.isArray(e)?e.some(typeof m=="string"?F=>F===m:F=>F===m.id):e===(typeof m=="string"?m:m.id))},o?o(m):typeof m=="string"?m:m.name)))}var te=h(require("react"));function q(a){var i=a,{type:t,minRows:r=3,autosize:e,className:n}=i,o=d(i,["type","minRows","autosize","className"]);return te.createElement("textarea",f(l({},o),{onInput:e?p=>{let s=p.target;setTimeout(()=>{s.style.height="auto",s.style.height=`${s.scrollHeight}px`},0)}:void 0,className:"brrr-Textarea".concat(n?" ":"",n||""),rows:r}))}function v(t){return t.tagName==="INPUT"}function b(t){return t.tagName==="SELECT"}function E(t){return t.tagName==="TEXTAREA"}var g={badInput:"Value is invalid.",required:"This field is required.",minLength:"Text is too short.",maxLength:"Text is too long.",pattern:"Value is invalid.",min:"Value is too low.",max:"Value is high.",step:"Value is invalid.",email:"Value is invalid.",url:"Value is invalid."};function ce(t){g=l(l({},g),t)}function J(t){if(t.validity.badInput)return g.badInput;if(t.validity.valueMissing)return g.required;if(b(t))return"";if(t.validity.tooShort)return g.minLength;if(t.validity.tooLong)return g.maxLength;if(E(t))return"";if(t.validity.patternMismatch)return g.pattern;if(t.validity.rangeUnderflow)return g.min;if(t.validity.rangeOverflow)return g.max;if(t.validity.stepMismatch)return g.step;if(t.validity.typeMismatch){if(t.type==="email")return g.email;if(t.type==="url")return g.url}return""}function I(t,r){var o;let e=t.elements.namedItem(r);if(!e)throw new Error(`Cannot find field with name ${r}`);if("length"in e&&e.length){let a=Array.from(e);if(a[0].type==="radio")return(o=Array.from(a).find(i=>i.checked))==null?void 0:o.value;if(a[0].type==="checkbox")return Array.from(a).map(i=>i.checked?i.value:null).filter(Boolean);throw new Error(`Unexpected collection found in field name ${r}. Found type of ${a[0].type}`)}let n=e;if(b(n))return n.multiple?Array.from(n.selectedOptions).map(a=>a.value):n.value;if(v(n))return n.type==="file"?n.files:n.type==="email"&&n.multiple?n.value.split(/\s*,\s*/):n.type==="checkbox"&&n.dataset.group!==n.name||n.type==="radio"?n.checked:n.value;if(E(n))return n.value;throw new Error(`Unexpected element found in field name ${r}. Found ${n.tagName}`)}function L(t,r,e){let n=t.elements.namedItem(r);if(!n)throw new Error(`Cannot find field with name ${r}`);if("length"in n&&n.length){let a=Array.from(n);if(a[0].type==="radio"){a.forEach(i=>{i.checked=i.value===e});return}if(a[0].type==="checkbox"){a.forEach(Array.isArray(e)?i=>{i.checked=e.includes(i.value)}:i=>{i.checked=i.value===e});return}throw new Error(`Unexpected collection found in field name ${r}. Found type of ${a[0].type}`)}let o=n;if(b(o)){if(o.multiple){Array.from(o.selectedOptions).forEach(Array.isArray(e)?a=>{a.selected=e.includes(a.value)}:a=>{a.selected=a.value===e});return}o.value=`${e}`;return}if(v(o)){if(o.type==="email"&&o.multiple&&Array.isArray(e)){o.value=e.join(",");return}if(o.type==="checkbox"&&o.dataset.group!==o.name){o.checked=!!e;return}if(o.type==="radio"){o.checked=!!e;return}o.value=`${e}`;return}if(E(o)){o.value=`${e}`;return}throw new Error(`Unexpected element found in field name ${r}. Found type of ${o.type}`)}var z=t=>new FormData(t);function y(t,r,e){t[r]?(Array.isArray(t[r])||(t[r]=[t[r]]),t[r].push(e)):t[r]=e}var X=t=>{let r={};for(let e of Array.from(t.elements)){if(v(e))switch(e.type){case"number":case"range":y(r,e.name,+e.value);continue;case"radio":!e.checked&&!r[e.name]&&y(r,e.name,null),e.checked&&y(r,e.name,e.value);continue;case"checkbox":e.dataset.group!==e.name?y(r,e.name,!!e.checked):!e.checked&&!r[e.name]?y(r,e.name,[]):e.checked&&y(r,e.name,e.value);continue;case"email":e.multiple?y(r,e.name,e.value.split(/\s*,\s*/)):y(r,e.name,e.value);continue;case"file":y(r,e.name,e.files);default:y(r,e.name,e.value);continue}b(e)&&(e.multiple?y(r,e.name,Array.from(e.selectedOptions).map(n=>n.value)):y(r,e.name,e.value)),E(e)&&y(r,e.name,e.value)}return r};var re=h(require("react"));function Q(t){return(r,e)=>{let n=Array.isArray(e)?e:[e];return function(p){var s=p,{validators:a}=s,i=d(s,["validators"]);return re.createElement(r,l(l({},i),$(t,a?n.concat(a):n,i[t])))}}}function $(t,r,e){let n=o=>{var p;let a=o.validity.valid?"":J(o);if(!a){let s=I(o.form,o.name);for(let V of r)if(a=V(s),a)break}o.setCustomValidity(a);let i=(p=o.closest(".brrr-Label, .brrr-Fieldset"))==null?void 0:p.querySelector(`#${o.name}-hint`);return i&&(i.textContent=a),!!a};return{[t]:o=>(n(o.target),e==null?void 0:e(o)),onInvalid:o=>{n(o.target)&&o.preventDefault()}}}var fe=Q("onChange"),ye=Q("onBlur");var xe=["radio","checkbox"];function ge(t){let r=t.validate?$(t.validate,t.validators||[],t[t.validate]):null;if(t.type==="checkboxes")return R.createElement(G,l(l({},t),r));if(t.type==="radiogroup")return R.createElement(W,l(l({},t),r));let s=t,{label:e,hint:n,className:o,inputClassName:a}=s,i=d(s,["label","hint","className","inputClassName"]),p=xe.includes(t.type)?P:K;return R.createElement(p,{label:e,name:i.name,hint:n,className:o},t.type==="select"?R.createElement(j,l(f(l({},t),{className:a}),r)):t.type==="textarea"?R.createElement(q,l(f(l({},t),{className:a}),r)):R.createElement(T,l(f(l({},t),{className:a}),r)))}var oe=h(require("react"));function w(t,r,e){var i;let n=t.elements.namedItem(r);if(!n)throw new Error(`Cannot find field with name ${r}`);let o="length"in n&&n.length?n.item(0):n;o.setCustomValidity(e);let a=(i=o.closest(".brrr-Label, .brrr-Fieldset"))==null?void 0:i.querySelector(`#${o.name}-hint`);a&&(a.textContent=e)}function ne(t,r){let e=!0;for(let o of Array.from(t.elements))o.dispatchEvent(new Event("invalid",{cancelable:!0}))||(e=!1);if(!r)return e;let n=r(o=>I(t,o),(o,a)=>L(t,o,a));if(n){e=!1;for(let o of Object.keys(n))w(t,o,n[o])}return e}function Fe(V){var N=V,{dialog:t,method:r="post",action:e,submitFormData:n,submitJson:o,validate:a,validator:i,className:p}=N,s=d(N,["dialog","method","action","submitFormData","submitJson","validate","validator","className"]);if(!n&&!o)throw new Error("Must supply a submit method prop of either `submitFormData` or `submitJson`.");let m={};return a!=null&&a.startsWith("onChange")&&(m.onChange=F=>{let x=F.target.form,c=i(u=>I(x,u),(u,k)=>L(x,u,k));if(console.log("Form onchange!",{formErrors:c}),c)for(let u of Object.keys(c))w(x,u,c[u])}),a!=null&&a.startsWith("onBlur")&&(m.onBlur=F=>{let x=F.target.form,c=i(u=>I(x,u),(u,k)=>L(x,u,k));if(c)for(let u of Object.keys(c))w(x,u,c[u])}),oe.createElement("form",f(l(f(l({},s),{className:"brrr-Form".concat(p?" ":"",p||""),noValidate:typeof window!==void 0,method:t?"dialog":r,action:e}),m),{onSubmit:F=>{let x=F.target;if(F.preventDefault(),ne(x,(a==null?void 0:a.endsWith("Submit"))&&i||void 0)){let c=n?n(z(x)):o(X(x));(c&&c instanceof Promise?c:Promise.resolve(c)).then(u=>{if(!!u)for(let k of Object.keys(u))w(x,k,u[k])})}}}))}
