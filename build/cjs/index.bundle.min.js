"use strict";var le=Object.create;var R=Object.defineProperty,se=Object.defineProperties,pe=Object.getOwnPropertyDescriptor,me=Object.getOwnPropertyDescriptors,ue=Object.getOwnPropertyNames,A=Object.getOwnPropertySymbols,de=Object.getPrototypeOf,D=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var ee=(t,r,e)=>r in t?R(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,s=(t,r)=>{for(var e in r||={})D.call(r,e)&&ee(t,e,r[e]);if(A)for(var e of A(r))te.call(r,e)&&ee(t,e,r[e]);return t},c=(t,r)=>se(t,me(r));var u=(t,r)=>{var e={};for(var n in t)D.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&A)for(var n of A(t))r.indexOf(n)<0&&te.call(t,n)&&(e[n]=t[n]);return e};var ce=(t,r)=>{for(var e in r)R(t,e,{get:r[e],enumerable:!0})},re=(t,r,e,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of ue(r))!D.call(t,o)&&o!==e&&R(t,o,{get:()=>r[o],enumerable:!(n=pe(r,o))||n.enumerable});return t};var y=(t,r,e)=>(e=t!=null?le(de(t)):{},re(r||!t||!t.__esModule?R(e,"default",{value:t,enumerable:!0}):e,t)),fe=t=>re(R({},"__esModule",{value:!0}),t);var be={};ce(be,{Checkboxes:()=>W,Field:()=>he,Fieldset:()=>L,Form:()=>Ve,InlineLabel:()=>V,Input:()=>h,Label:()=>K,RadioGroup:()=>G,Select:()=>q,Textarea:()=>j,getErrorMessage:()=>_,getFormFieldValue:()=>E,getFormValuesAsFormData:()=>z,getFormValuesAsJson:()=>X,isFormElement:()=>J,isInputElement:()=>b,isSelectElement:()=>x,isTextareaElement:()=>g,setDefaultErrorMessages:()=>Fe,setFormFieldValue:()=>k,validateForm:()=>Y,validationEffectHandler:()=>B,withValidation:()=>Q,withValidationOnBlur:()=>xe,withValidationOnChange:()=>ye,wrapWithFieldValidation:()=>M});module.exports=fe(be);var O=y(require("react"));var S=y(require("react"));function L(p){var l=p,{name:t,label:r,children:e,className:n,hint:o,hintClassName:a}=l,i=u(l,["name","label","children","className","hint","hintClassName"]);let d=`${t}-hint`;return S.createElement("fieldset",c(s({},i),{className:"fgb-Fieldset".concat(n?" ":"",n||"")}),S.createElement("legend",null,r),e,S.createElement("span",{id:d,className:"fgb-Fieldset-hint".concat(a?" ":"",a||""),"aria-live":"polite"},o))}var ne=y(require("react"));function h(t){return ne.createElement("input",c(s({tabIndex:0},t),{"aria-describedby":`${t.name}-hint`,className:"fgb-Input".concat(t.className?" ":"",t.className||"")}))}var v=y(require("react"));function K(l){var d=l,{label:t,name:r,children:e,hint:n,textClassName:o,hintClassName:a,className:i}=d,p=u(d,["label","name","children","hint","textClassName","hintClassName","className"]);let w=`${r}-hint`;return v.createElement("label",c(s({htmlFor:r},p),{className:"fgb-Label".concat(i?" ":"",i||"")}),typeof t=="string"?v.createElement("span",{className:"fgb-Label-text".concat(o?" ":"",o||"")},t):t,e,v.createElement("span",{id:w,className:"fgb-Label-hint".concat(a?" ":"",a||""),"aria-live":"polite"},n))}function V({label:t,children:r,className:e}){return v.createElement("label",{className:"fgb-InlineLabel".concat(e?" ":"",e||"")},r,t)}function W(i){var p=i,{type:t,name:r,options:e,label:n,defaultChecked:o}=p,a=u(p,["type","name","options","label","defaultChecked"]);return O.createElement(L,s({label:n,name:r},a),e.map(l=>O.createElement(V,{label:typeof l=="string"?l:l.name},O.createElement(h,{key:typeof l=="string"?l:l.id,type:"checkbox",name:r,value:typeof l=="string"?l:String(l.id),"data-group":r,defaultChecked:o?o.some(typeof l=="string"?d=>d===l:d=>d===l.id):!1}))))}var I=y(require("react"));var N=y(require("react"));function G(i){var p=i,{type:t,name:r,options:e,label:n,defaultChecked:o}=p,a=u(p,["type","name","options","label","defaultChecked"]);return N.createElement(L,s({label:n,name:r},a),e.map(l=>N.createElement(V,{label:typeof l=="string"?l:l.name},N.createElement(h,{key:typeof l=="string"?l:l.id,type:"radio",name:r,value:typeof l=="string"?l:String(l.id),"data-group":r,defaultChecked:!!o&&o===(typeof l=="string"?l:l.id)}))))}var U=y(require("react"));function q(l){var d=l,{options:t,type:r,defaultSelected:e,name:n,renderOption:o,className:a,optionClassName:i}=d,p=u(d,["options","type","defaultSelected","name","renderOption","className","optionClassName"]);let w="fgb-Field-option".concat(i?" ":"",i||"");return U.createElement("select",c(s({name:n,tabIndex:0,"aria-describedby":`${n}-hint`},p),{className:"fgb-Select".concat(a?" ":"",a||"")}),t.map(m=>U.createElement("option",{key:typeof m=="string"?m:m.id,value:typeof m=="string"?m:m.id,className:w,defaultChecked:!!e&&(p.multiple&&Array.isArray(e)?e.some(typeof m=="string"?T=>T===m:T=>T===m.id):e===(typeof m=="string"?m:m.id))},o?o(m):typeof m=="string"?m:m.name)))}var oe=y(require("react"));function j(a){var i=a,{type:t,minRows:r=3,autosize:e,className:n}=i,o=u(i,["type","minRows","autosize","className"]);return oe.createElement("textarea",c(s({},o),{onInput:e?p=>{let l=p.target;setTimeout(()=>{l.style.height="auto",l.style.height=`${l.scrollHeight}px`},0)}:void 0,className:"fgb-Textarea".concat(n?" ":"",n||""),rows:r}))}function J(t){return t.tagName==="FORM"}function b(t){return t.tagName==="INPUT"}function x(t){return t.tagName==="SELECT"}function g(t){return t.tagName==="TEXTAREA"}var F={badInput:"Malformed input.",required:"This field is required.",minLength:"Text is too short.",maxLength:"Text is too long.",pattern:"Value is invalid.",min:"Value is too low.",max:"Value is high.",step:"Value is off-step.",email:"Invalid email address.",url:"Invalid url."};function Fe(t){F=s(s({},F),t)}function _(t){if(t.validity.badInput)return F.badInput;if(t.validity.valueMissing)return F.required;if(x(t))return"";if(t.validity.tooShort)return F.minLength;if(t.validity.tooLong)return F.maxLength;if(g(t))return"";if(t.validity.patternMismatch)return F.pattern;if(t.validity.rangeUnderflow)return F.min;if(t.validity.rangeOverflow)return F.max;if(t.validity.stepMismatch)return F.step;if(t.validity.typeMismatch){if(t.type==="email")return F.email;if(t.type==="url")return F.url}return""}function E(t,r){var o;let e=t.elements.namedItem(r);if(!e)throw new Error(`Cannot find field with name ${r}`);if("length"in e&&e.length){let a=Array.from(e);if(a[0].type==="radio")return(o=Array.from(a).find(i=>i.checked))==null?void 0:o.value;if(a[0].type==="checkbox")return Array.from(a).map(i=>i.checked?i.value:null).filter(Boolean);throw new Error(`Unexpected collection found in field name ${r}. Found type of ${a[0].type}`)}let n=e;if(x(n))return n.multiple?Array.from(n.selectedOptions).map(a=>a.value):n.value;if(b(n))return n.type==="file"?n.files:n.type==="email"&&n.multiple?n.value.split(/\s*,\s*/):n.type==="checkbox"&&n.dataset.group!==n.name||n.type==="radio"?n.checked:n.value;if(g(n))return n.value;throw new Error(`Unexpected element found in field name ${r}. Found ${n.tagName}`)}function k(t,r,e){let n=t.elements.namedItem(r);if(!n)throw new Error(`Cannot find field with name ${r}`);if("length"in n&&n.length){let a=Array.from(n);if(a[0].type==="radio"){a.forEach(i=>{i.checked=i.value===e});return}if(a[0].type==="checkbox"){a.forEach(Array.isArray(e)?i=>{i.checked=e.includes(i.value)}:i=>{i.checked=i.value===e});return}throw new Error(`Unexpected collection found in field name ${r}. Found type of ${a[0].type}`)}let o=n;if(x(o)){if(o.multiple){Array.from(o.selectedOptions).forEach(Array.isArray(e)?a=>{a.selected=e.includes(a.value)}:a=>{a.selected=a.value===e});return}o.value=`${e}`;return}if(b(o)){if(o.type==="email"&&o.multiple&&Array.isArray(e)){o.value=e.join(",");return}if(o.type==="checkbox"&&o.dataset.group!==o.name){o.checked=!!e;return}if(o.type==="radio"){o.checked=!!e;return}o.value=`${e}`;return}if(g(o)){o.value=`${e}`;return}throw new Error(`Unexpected element found in field name ${r}. Found type of ${o.type}`)}var z=t=>new FormData(t);function f(t,r,e){t[r]?(Array.isArray(t[r])||(t[r]=[t[r]]),t[r].push(e)):t[r]=e}var X=t=>{let r={};for(let e of Array.from(t.elements)){if(b(e))switch(e.type){case"number":case"range":f(r,e.name,+e.value);continue;case"radio":!e.checked&&!r[e.name]&&f(r,e.name,null),e.checked&&f(r,e.name,e.value);continue;case"checkbox":e.dataset.group!==e.name?f(r,e.name,!!e.checked):!e.checked&&!r[e.name]?f(r,e.name,[]):e.checked&&f(r,e.name,e.value);continue;case"email":e.multiple?f(r,e.name,e.value.split(/\s*,\s*/)):f(r,e.name,e.value);continue;case"file":f(r,e.name,e.files);default:f(r,e.name,e.value);continue}x(e)&&(e.multiple?f(r,e.name,Array.from(e.selectedOptions).map(n=>n.value)):f(r,e.name,e.value)),g(e)&&f(r,e.name,e.value)}return r};var ae=y(require("react"));function M(t,r,e){let n=o=>{var p;let a=o.validity.valid?"":_(o);if(!a){let l=E(o.form,o.name);for(let d of r)if(a=d(l),a)break}o.setCustomValidity(a);let i=(p=o.closest(".fgb-Label, .fgb-Fieldset"))==null?void 0:p.querySelector(`#${o.name}-hint`);return i&&(i.textContent=a),!!a};return{[t]:o=>(n(o.target),e==null?void 0:e(o)),onInvalid:o=>{n(o.target)&&o.preventDefault()}}}function Q(t){return(r,e)=>{let n=Array.isArray(e)?e:[e];return function(p){var l=p,{validators:a}=l,i=u(l,["validators"]);return ae.createElement(r,s(s({},i),M(t,a?n.concat(a):n,i[t])))}}}var ye=Q("onChange"),xe=Q("onBlur");function P(t,r,e){var i;let n=t.elements.namedItem(r);if(!n)throw new Error(`Cannot find field with name ${r}`);let o="length"in n&&n.length?n.item(0):n;o.setCustomValidity(e);let a=(i=o.closest(".fgb-Label, .fgb-Fieldset"))==null?void 0:i.querySelector(`#${o.name}-hint`);a&&(a.textContent=e)}function Y(t,r){let e=!0;for(let o of Array.from(t.elements))o.dispatchEvent(new Event("invalid",{cancelable:!0}))||(e=!1);if(!r)return e;let n=r(o=>E(t,o),(o,a)=>k(t,o,a));if(n)for(let o of Object.keys(n))n[o]&&(e=!1),P(t,o,n[o]);return e}function B(t,r){return e=>{let n=J(e.target)?e.target:"form"in e.target?e.target.form:null;if(!n)throw new Error("Expected to find a form element attached to wrapped event target.");let o=t(a=>E(n,a),(a,i)=>k(n,a,i));if(o)for(let a of Object.keys(o))P(n,a,o[a]);return r==null?void 0:r(e)}}var ge=["radio","checkbox"];function he(t){let r=t.validate?M(t.validate,t.validators||(t.validator?[t.validator]:[]),t[t.validate]):null;if(t.type==="checkboxes")return I.createElement(W,s(s({},t),r));if(t.type==="radiogroup")return I.createElement(G,s(s({},t),r));let l=t,{label:e,hint:n,className:o,inputClassName:a}=l,i=u(l,["label","hint","className","inputClassName"]),p=ge.includes(t.type)?V:K;return I.createElement(p,{label:e,name:i.name,hint:n,className:o},t.type==="select"?I.createElement(q,s(c(s({},t),{className:a}),r)):t.type==="textarea"?I.createElement(j,s(c(s({},t),{className:a}),r)):I.createElement(h,s(c(s({},t),{className:a}),r)))}var ie=y(require("react"));function Ve(w){var m=w,{dialog:t,method:r="post",action:e,submitFormData:n,submitJson:o,validate:a,validator:i,className:p,autoComplete:l=!1}=m,d=u(m,["dialog","method","action","submitFormData","submitJson","validate","validator","className","autoComplete"]);if(!n&&!o)throw new Error("Must supply a submit method prop of either `submitFormData` or `submitJson`.");return ie.createElement("form",c(s({},d),{className:"fgb-Form".concat(p?" ":"",p||""),noValidate:typeof window!==void 0,autoComplete:l?"on":"off",method:t?"dialog":r,action:e,onChange:i&&(a==null?void 0:a.startsWith("onChange"))?B(i,d.onChange):void 0,onBlur:i&&(a==null?void 0:a.startsWith("onBlur"))?B(i,d.onBlur):void 0,onSubmit:T=>{let H=T.target;if(T.preventDefault(),Y(H,(a==null?void 0:a.endsWith("Submit"))&&i||void 0)){let C=n?n(z(H)):o(X(H));(C&&C instanceof Promise?C:Promise.resolve(C)).then($=>{if(!!$)for(let Z of Object.keys($))P(H,Z,$[Z])})}}}))}0&&(module.exports={Checkboxes,Field,Fieldset,Form,InlineLabel,Input,Label,RadioGroup,Select,Textarea,getErrorMessage,getFormFieldValue,getFormValuesAsFormData,getFormValuesAsJson,isFormElement,isInputElement,isSelectElement,isTextareaElement,setDefaultErrorMessages,setFormFieldValue,validateForm,validationEffectHandler,withValidation,withValidationOnBlur,withValidationOnChange,wrapWithFieldValidation});
