"use strict";var oe=Object.create;var H=Object.defineProperty,ae=Object.defineProperties,ie=Object.getOwnPropertyDescriptor,le=Object.getOwnPropertyDescriptors,se=Object.getOwnPropertyNames,k=Object.getOwnPropertySymbols,pe=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty,J=Object.prototype.propertyIsEnumerable;var q=(t,r,e)=>r in t?H(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e,l=(t,r)=>{for(var e in r||={})N.call(r,e)&&q(t,e,r[e]);if(k)for(var e of k(r))J.call(r,e)&&q(t,e,r[e]);return t},m=(t,r)=>ae(t,le(r));var u=(t,r)=>{var e={};for(var o in t)N.call(t,o)&&r.indexOf(o)<0&&(e[o]=t[o]);if(t!=null&&k)for(var o of k(t))r.indexOf(o)<0&&J.call(t,o)&&(e[o]=t[o]);return e};var me=(t,r)=>{for(var e in r)H(t,e,{get:r[e],enumerable:!0})},z=(t,r,e,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of se(r))!N.call(t,n)&&n!==e&&H(t,n,{get:()=>r[n],enumerable:!(o=ie(r,n))||o.enumerable});return t};var V=(t,r,e)=>(e=t!=null?oe(pe(t)):{},z(r||!t||!t.__esModule?H(e,"default",{value:t,enumerable:!0}):e,t)),ue=t=>z(H({},"__esModule",{value:!0}),t);var Fe={};me(Fe,{Field:()=>fe,Form:()=>ce,Submit:()=>ye,getErrorMessage:()=>G,getFormFieldValue:()=>v,getFormValuesAsFormData:()=>K,getFormValuesAsJson:()=>U,isFormElement:()=>D,isInputElement:()=>P,isSelectElement:()=>h,isTextareaElement:()=>b,setDefaultErrorMessages:()=>de,setFormFieldValue:()=>S});module.exports=ue(Fe);var M=V(require("react"));var T=V(require("react"));function C(o){var n=o,{type:t,options:r}=n,e=u(n,["type","options"]);let a=T.createElement("input",m(l(l({tabIndex:0},t==="numeric"?{type:"text",inputMode:"numeric",pattern:"[0-9]*"}:{type:t}),e),{"aria-describedby":`${e.name}-hint`,"data-fgb":"input",list:Array.isArray(r)&&r.length?`${e.name}-options`:void 0}));return Array.isArray(r)&&r.length?T.createElement(T.Fragment,null,a,T.createElement("datalist",{id:`${e.name}-options`},r.map(i=>typeof i=="object"?T.createElement("option",{key:i.value,value:i.value},i.label):T.createElement("option",{key:i,value:i},i)))):a}var $=V(require("react"));var L=V(require("react"));function A(y){var d=y,{name:t,label:r,children:e,hint:o,hintClassName:n,labelClassName:a,group:i,labelStyle:s,hintStyle:p}=d,c=u(d,["name","label","children","hint","hintClassName","labelClassName","group","labelStyle","hintStyle"]);let x=`${t}-hint`;return L.createElement("fieldset",l({"data-fgb":"fieldset"},c),L.createElement("span",{id:x,"data-fgb":"hint",className:n,"aria-live":"polite","data-fgb-hint":o,style:l({order:2},p)},o),i?L.createElement("legend",{"data-fgb":"label",className:a,style:s},r):L.createElement("label",{htmlFor:t,"data-fgb":"label",className:a,style:s},r),e)}function X(i){var s=i,{type:t,name:r,options:e,label:o,defaultChecked:n}=s,a=u(s,["type","name","options","label","defaultChecked"]);return e.map(p=>{let{value:c,label:y}=typeof p=="object"?p:{label:p,value:p},d=`${r}-${c}`;return $.createElement(A,{name:d,label:y,key:c},$.createElement(C,m(l({},a),{type:t.startsWith("c")?"checkbox":"radio",name:r,id:d,value:String(c),"data-fgb-group":r,defaultChecked:Array.isArray(n)?n.some(x=>x===c):n===c})))})}var B=V(require("react"));function Q(a){var i=a,{options:t,type:r,defaultSelected:e,name:o}=i,n=u(i,["options","type","defaultSelected","name"]);return B.createElement("select",m(l({name:o,tabIndex:0,"aria-describedby":`${o}-hint`},n),{"data-fgb":"input"}),t.map(s=>{let{value:p,label:c}=typeof s=="object"?s:{label:s,value:s};return B.createElement("option",{key:p,value:p,defaultChecked:!!e&&(n.multiple&&Array.isArray(e)?e.some(y=>y==p):e==p)},c)}))}var Y=V(require("react"));function Z(n){var a=n,{type:t,minRows:r=3,autosize:e}=a,o=u(a,["type","minRows","autosize"]);return Y.createElement("textarea",m(l({},o),{onInput:e?i=>{let s=i.target;setTimeout(()=>{s.style.height="auto",s.style.height=`${s.scrollHeight}px`},0)}:void 0,"data-fgb":"input",rows:r}))}function D(t){return t.tagName==="FORM"}function P(t){return t.tagName==="INPUT"}function h(t){return t.tagName==="SELECT"}function b(t){return t.tagName==="TEXTAREA"}var g={badInput:"Malformed input.",required:"Required.",minLength:"Too short.",maxLength:"Too long.",pattern:"Invalid value.",min:"Too low.",max:"Too high.",step:"Off-step.",email:"Invalid email address.",url:"Invalid url."};function de(t){g=l(l({},g),t)}function G(t){if(t.validity.badInput)return g.badInput;if(t.validity.valueMissing)return g.required;if(h(t))return"";if(t.validity.tooShort)return g.minLength;if(t.validity.tooLong)return g.maxLength;if(b(t))return"";if(t.validity.patternMismatch)return t.title||g.pattern;if(t.validity.rangeUnderflow)return g.min;if(t.validity.rangeOverflow)return g.max;if(t.validity.stepMismatch)return g.step;if(t.validity.typeMismatch){if(t.type==="email")return g.email;if(t.type==="url")return g.url}return""}function v(t,r){var n;let e=t.elements.namedItem(r);if(!e)throw new Error(`Cannot find field with name ${r}`);if("length"in e&&e.length){let a=Array.from(e);if(a[0].type==="radio")return(n=Array.from(a).find(i=>i.checked))==null?void 0:n.value;if(a[0].type==="checkbox")return Array.from(a).map(i=>i.checked?i.value:null).filter(Boolean);throw new Error(`Unexpected collection found in field name ${r}. Found type of ${a[0].type}`)}let o=e;if(h(o))return o.multiple?Array.from(o.selectedOptions).map(a=>a.value):o.value;if(P(o))return o.type==="file"?o.files:o.type==="email"&&o.multiple?o.value.split(/\s*,\s*/):o.type==="checkbox"&&o.dataset.fgbGroup!==o.name||o.type==="radio"?o.checked:o.value;if(b(o))return o.value;throw new Error(`Unexpected element found in field name ${r}. Found ${o.tagName}`)}function O(t){var e;return((e=t.closest("[data-fgb='fieldset']"))==null?void 0:e.querySelector(`#${t.name}-hint`))||null}function I(t,r,e){let o=t.elements.namedItem(r);if(!o)throw new Error(`Cannot find field with name ${r}`);let n="length"in o&&o.length?o.item(0):o;n.setCustomValidity(e);let a=O(n);a&&(a.textContent=e||a.dataset.fgbHint||"")}function ee(t,r,e){let o=n=>{let a=n.validity.valid?"":G(n),i=v(n.form,n.name);return a=(r==null?void 0:r(i))||a,I(n.form,n.name,a),!!a};return{[t]:n=>(o(n.target),e==null?void 0:e(n)),onInvalid:n=>{o(n.target)&&n.preventDefault()}}}function fe(t){let r=ee(t.validateOnChange?"onChange":"onBlur",typeof t.validateOnChange=="function"?t.validateOnChange:typeof t.validateOnBlur=="function"?t.validateOnBlur:void 0,t[t.validateOnChange?"onChange":"onBlur"]),_=t,{label:e,hint:o,className:n,style:a,hintClassName:i,hintStyle:s,labelClassName:p,labelStyle:c,inputClassName:y,inputStyle:d,inputLabelClassName:x,inputLabelStyle:R,name:E,type:F="text"}=_,w=u(_,["label","hint","className","style","hintClassName","hintStyle","labelClassName","labelStyle","inputClassName","inputStyle","inputLabelClassName","inputLabelStyle","name","type"]);return M.createElement(A,{label:e,name:E,hint:o,className:n,style:a,hintStyle:s,hintClassName:i,labelStyle:c,labelClassName:p,"data-fgb-type":F,group:F==="radios"||F==="checkboxes"},F==="select"?M.createElement(Q,m(l(l({},w),r),{name:E,className:y,style:d})):F==="textarea"?M.createElement(Z,m(l(l({},w),r),{name:E,className:y,style:d})):F==="checkboxes"||F==="radios"?M.createElement(X,m(l(l({},w),r),{type:F,name:E,className:x,style:R,inputClassName:y,inputStyle:d})):M.createElement(C,m(l(l({},w),r),{name:E,type:F,className:y,style:d})))}var re=V(require("react"));var K=t=>new FormData(t);function f(t,r,e){t[r]?(Array.isArray(t[r])||(t[r]=[t[r]]),t[r].push(e)):t[r]=e}var U=t=>{let r={};for(let e of Array.from(t.elements)){if(P(e))switch(e.type){case"number":case"range":f(r,e.name,+e.value);continue;case"radio":!e.checked&&!r[e.name]&&f(r,e.name,null),e.checked&&f(r,e.name,e.value);continue;case"checkbox":e.dataset.fgbGroup!==e.name?f(r,e.name,!!e.checked):!e.checked&&!r[e.name]?f(r,e.name,[]):e.checked&&f(r,e.name,e.value);continue;case"email":e.multiple?f(r,e.name,e.value.split(/\s*,\s*/)):f(r,e.name,e.value);continue;case"file":f(r,e.name,e.files);default:f(r,e.name,e.value);continue}h(e)&&(e.multiple?f(r,e.name,Array.from(e.selectedOptions).map(o=>o.value)):f(r,e.name,e.value)),b(e)&&f(r,e.name,e.value)}return r};function S(t,r,e){let o=t.elements.namedItem(r);if(!o)throw new Error(`Cannot find field with name ${r}`);if("length"in o&&o.length){let a=Array.from(o);if(a[0].type==="radio"){a.forEach(i=>{i.checked=i.value===e});return}if(a[0].type==="checkbox"){a.forEach(Array.isArray(e)?i=>{i.checked=e.includes(i.value)}:i=>{i.checked=i.value===e});return}throw new Error(`Unexpected collection found in field name ${r}. Found type of ${a[0].type}`)}let n=o;if(h(n)){if(n.multiple){Array.from(n.selectedOptions).forEach(Array.isArray(e)?a=>{a.selected=e.includes(a.value)}:a=>{a.selected=a.value===e});return}n.value=`${e}`;return}if(P(n)){if(n.type==="email"&&n.multiple&&Array.isArray(e)){n.value=e.join(",");return}if(n.type==="checkbox"&&n.dataset.fgbGroup!==n.name){n.checked=!!e;return}if(n.type==="radio"){n.checked=!!e;return}n.value=`${e}`;return}if(b(n)){n.value=`${e}`;return}throw new Error(`Unexpected element found in field name ${r}. Found type of ${n.type}`)}function te(t,r){let e=!0,o=r==null?void 0:r(n=>v(t,n),(n,a)=>S(t,n,a));for(let n of Array.from(t.elements)){if(!("name"in n))continue;let a=(o==null?void 0:o[n.name])||"",i=n.dispatchEvent(new Event("invalid",{cancelable:!0}))&&!a;(i||a)&&I(t,n.name,a),i||(e=!1)}return e}function j(t,r){return e=>{let o=D(e.target)?e.target:"form"in e.target?e.target.form:null;if(!o)throw new Error("Expected to find a form element attached to wrapped event target.");let n=t(a=>v(o,a),(a,i)=>S(o,a,i));if(n)for(let a of Object.keys(n))I(o,a,n[a]);return r==null?void 0:r(e)}}function ce(c){var y=c,{dialog:t,method:r="post",action:e,submitFormData:o,submitJson:n,validateOnBlur:a,validateOnChange:i,autoComplete:s=!1}=y,p=u(y,["dialog","method","action","submitFormData","submitJson","validateOnBlur","validateOnChange","autoComplete"]);if(!o&&!n)throw new Error("Must supply a submit method prop of either `submitFormData` or `submitJson`.");return re.createElement("form",m(l({},p),{"data-fgb":"form",noValidate:typeof window!==void 0,autoComplete:s?"on":"off",method:t?"dialog":r,action:e,onChange:i?j(i,p.onChange):void 0,onBlur:a?j(a,p.onBlur):void 0,onSubmit:d=>{let x=d.target;if(d.preventDefault(),te(x,i||a||void 0)){let R=o?o(K(x)):n(U(x));(R&&R instanceof Promise?R:Promise.resolve(R)).then(E=>{if(!!E)for(let F of Object.keys(E))I(x,F,E[F])})}}}))}var ne=V(require("react"));function W(t){var r;for(let e of Array.from(t.elements))if("name"in e&&(!e.validity.valid||((r=O(e))==null?void 0:r.textContent)))return!1;return!0}function ye(e){var o=e,{validate:t}=o,r=u(o,["validate"]);return ne.createElement("button",m(l({},r),{type:"submit",ref:n=>{n&&n.form&&(n.disabled=!W(n.form),n.form.addEventListener(t==="onChange"?"input":"change",a=>{n.disabled=!W(n.form)}))}}))}0&&(module.exports={Field,Form,Submit,getErrorMessage,getFormFieldValue,getFormValuesAsFormData,getFormValuesAsJson,isFormElement,isInputElement,isSelectElement,isTextareaElement,setDefaultErrorMessages,setFormFieldValue});
